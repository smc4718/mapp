# mapp
mapp 프로젝트 과제.
회원가입 -> 추천인 입력시 추천받은 사람의 밑으로 # 🌐 MAPP – Referral-based Reward System

> 추천인 구조 기반의 구매 리워드 시스템  
> 수당 분배, 포인트 적립, 트리 기반 조직도까지 운영 흐름을 고려해 설계한 웹 프로젝트입니다.

---

## 📌 개요

**MAPP**는 사용자가 상품을 구매하면, 추천 구조를 따라 수당이 자동 분배되고  
동시에 동일한 비율의 포인트가 적립되는 구조의 리워드 플랫폼입니다.  
직급 조건에 따라 승급되며, 관리자 화면에서 전체 조직도 확인이 가능합니다.

---

## 🛠️ 기술 스택

| 구분         | 사용 기술 |
|--------------|-----------|
| Backend      | Java, Spring Boot, MyBatis |
| Frontend     | Thymeleaf, HTML5, CSS3, JavaScript, AJAX |
| DB           | MariaDB (관리 도구: HeidiSQL) |
| IDE          | IntelliJ (Gradle 기반) |
| Deployment   | AWS EC2 (Ubuntu), `nohup` 실행, DuckDNS 무료 도메인 사용 |
| UI 템플릿     | 무료 HTML 템플릿 커스터마이징 |

---

## 🔑 핵심 기능

### ✔️ 사용자 공통
- 회원가입 / 로그인 / 로그아웃
- 공지사항 게시판 (CRUD)
- 상품 구매 테스트 기능
- 리워드 페이지 (포인트, 구매 내역, 수당 지급 이력 조회)

### ✔️ 관리자 기능
- 회원 전체 목록 조회
- 추천인 조직도 트리(최대 7세대까지 계층 구조)

---

## 🔄 주요 흐름

```text
[회원가입] → 추천인 코드 입력 → 하위 세대로 자동 등록  
     ↓  
[상품 구매] → 추천 구조 탐색 → 수당 자동 분배 (최대 7세대)  
     ↓  
[수당 지급] → 직급에 따라 비율 계산  
     ↓  
[포인트 적립] → 수당과 동일한 비율만큼 자동 적립
```

---

## 📐 핵심 로직 구현

- `@Transactional` 사용: 구매 → 수당 분배 → 포인트 적립까지 하나의 트랜잭션으로 처리
- `CompensationServiceImpl`: 세대별 수당 계산 로직, 직급 조건 처리
- 추천인 조직도: 재귀 알고리즘 기반의 7세대 트리 구조 생성
- 직급 조건 예시:  
  - `M1 → M2`: 직접 추천 5명 + 2라인 충족  
  - `M2 → M3`: 각 라인 3명 이상 충족

---

## 🚀 배포 환경

| 항목 | 내용 |
|------|------|
| 인스턴스 | AWS EC2 (Ubuntu) |
| 배포 방식 | Spring Boot JAR → `nohup` 실행 |
| 포트 | 80번 포트 직접 서비스 |
| 도메인 | DuckDNS 무료 도메인 사용 |

---

## ✍️ 개발 노트

단순히 기능을 구현하는 것에서 나아가  
추천 구조, 수당 계산, 예외 처리, 운영 흐름까지 전반을 고려한 프로젝트였습니다.  
특히 트랜잭션 관리와 조직도 트리 구조 처리 등을 고민하며 성장할 수 있었던 경험이었습니다.

---
